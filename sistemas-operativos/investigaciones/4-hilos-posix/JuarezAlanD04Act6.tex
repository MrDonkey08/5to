\documentclass[12pt, a4paper]{article} % Formato de plantlla que vamos a utilizar

\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{setspace}
\usepackage[margin=2.5cm, left=3cm, right=2cm, includefoot]{geometry}
\usepackage{graphicx} % Inserción de imágenes
\usepackage[dvipsnames, table, xcdraw]{xcolor}
\usepackage[most]{tcolorbox} % Inserción de cuadros en la portada
\usepackage{fancyhdr} % Definir el estilo de la página
\usepackage[hidelinks]{hyperref} % Gestión de hipervínculos
\usepackage{listings} % Para la inserción de código
\usepackage{parskip} % Arreglo de la tabulación en el documento
\usepackage[figurename=Fig.]{caption} % Cambiar el nombre del caption de las fotos
\usepackage{smartdiagram} % Inserción de Diagramas
\usepackage{zed-csp} % Inserción de esquemas
\usepackage{hyperref} % Para hipervínculos
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{blindtext} % Solo para generar texto de relleno, puedes eliminar esta línea en tu documento final.
\usepackage{natbib}
\usepackage{array} % <-- Add this line for m{} column type


% Encabezado y pie de página
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt} % Elimina la línea del encabezado
%\fancyfoot[C,CO]{\thepage} % Número de página en el centro para páginas pares e impares
%\fancyhead[RO]{\textbf{\theTitle}} % Nombre de la materia en páginas impares
%\fancyhead[L]{\textbf{\theauthor}} % Título de la investigación en páginas pares
\setlength{\headheight}{15pt} % Ajuste necesario para evitar warnings

% Configuración de fuentes
\usepackage{times} % Times New Roman
%\usepackage{tgheros} % Tahoma
%\renewcommand{\familydefault}{\sfdefault} % Descomenta esta línea si usas Tahoma
%\usepackage{uarial} % Arial
%\renewcommand{\rmdefault}{phv} % Descomenta esta línea si usas Arial

% Ajustes de formato
\renewcommand{\baselinestretch}{1.15} % Espaciado de línea anterior
\setlength{\parskip}{6pt} % Espaciado de línea anterior
\setlength{\parindent}{0pt} % Sangría

% Declaración de colores
\definecolor{greenPortada}{HTML}{69A84F}
\definecolor{LightGray}{gray}{0.9}
\definecolor{codegreen}{rgb}{0, 0.6, 0}
\definecolor{codegray}{rgb}{0.5, 0.5, 0.5}
\definecolor{codepurple}{rgb}{0.58, 0, 0.82}
\definecolor{backcolour}{rgb}{0.95, 0.95, 0.92}

% Esilo de enlaces
\hypersetup{
	colorlinks=true,
	linkcolor=greenPortada,
	filecolor=greenPortada,
	urlcolor=greenPortada,
	pdftitle={Overleaf Example},
	pdfpagemode=FullScreen,
}

\urlstyle{same}

% Estilo de bloques de código
\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2
}

\lstset{style=mystyle}

% Declaración de variables
\newcommand{\logoUdg}{../../../../attachments/images/portada-udg.jpeg}
\newcommand{\logoCucei}{../../../../attachments/images/portada-cucei.jpeg}

% Datos de la Materia
\newcommand{\materia}{Sistemas Operativos}
\newcommand{\theTitle}{4. Hilos Posix}
\newcommand{\profesor}{Violeta del Rocío Becerra Velázquez}
\newcommand{\theAuthor}{Alan Yahir Juárez Rubio}
\newcommand{\code}{218517809}
\newcommand{\carrera}{Ingeniería en Cómputo}
\newcommand{\seccion}{D04}
\newcommand{\startDate}{03 de marzo de 2024}

% Espaciado
\newcommand{\nl}{\par\vspace{0.4cm}}

% Adicionales
\addto\captionsspanish{\renewcommand{\contentsname}{Índice}}
\setlength{\headheight}{60pt}
\pagestyle{fancy}

% Encabezado
\fancyhf{}
\lhead{
	\begin{minipage}[c][2cm][c]{1.3cm}
		\begin{flushleft}
			\includegraphics[width=5cm, height=1.4cm, keepaspectratio]{\logoUdg}
		\end{flushleft}
	\end{minipage}
	\begin{minipage}[c][2cm][c]{0.5\textwidth} % Adjust the height as needed
		\begin{flushleft}	
		{\ifodd\value{page}\materia\fi}
		\end{flushleft}
	\end{minipage}
}
\rhead{
		\begin{minipage}[c][2cm][c]{0.4\textwidth} % Adjust the height as needed
			\begin{flushright}
				{\ifodd\value{page}\else\theTitle\fi}
			\end{flushright}
		\end{minipage}
		\begin{minipage}[c][2cm][c]{1.3cm}
			\begin{flushright}
				\includegraphics[width=5cm, height=1.4cm, keepaspectratio]{\logoCucei}
			\end{flushright}
		\end{minipage}
}

% Pie de página
\rfoot{\ifodd\value{page}\theAuthor\fi}

\renewcommand{\headrulewidth}{3pt}
\renewcommand{\headrule}{\hbox to\headwidth{\color{greenPortada}\leaders\hrule height \headrulewidth\hfill}}

\renewcommand{\lstlistingname}{Código} % Para cambiar el caption de los código
%\renewcommand\thepage{\ifodd\value{page}\else\arabic{page}\fi}

\title{\theTitle}
\author{\theAuthor}

% Comienzo del Documento
\begin{document}
\cfoot{\ifodd\value{page}\else\thepage\fi} % Paginación
\setstretch{1}

\begin{titlepage}
	\centering
	{\huge\textbf{Universidad de Guadalajara}}\par\vspace{0.6cm}
	{\LARGE{Centro Universitario de Ciencias Exactas e Ingenierías}}\vfill
	
	\begin{figure}[h]
		\begin{minipage}[t]{0.45\textwidth}
			\centering
			\includegraphics[width=130px, height=300px, keepaspectratio]{\logoUdg}
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.45\textwidth}
			\centering
			\includegraphics[width=130px, height=300px, keepaspectratio]{\logoCucei}
		\end{minipage}
	\end{figure}\vfill
	
	{\Large{División de Tecnologías para la Integración CiberHumana}}\vfill
	{\Large\textbf{\materia}}\vfill
	\begin{figure}[h]
		\centering
		\begin{minipage}[t]{0.75\textwidth}
			{\Large
				\textbf{Profesor:} \profesor\nl
				\textbf{Alumno:} \theAuthor\nl
				\textbf{Código:} \code\nl
				\textbf{Carrera:} \carrera\nl
				\textbf{Sección:} \seccion
			}
		\end{minipage}
	\end{figure}\vfill
	{\LARGE{\textbf{\theTitle}}}\vfill
	
	\begin{tcolorbox}[colback=red!5!white, colframe=red!75!black]
		\centering
		Este documento contiene información sensible.\\
		No debería ser impreso o compartido con terceras entidades.
	\end{tcolorbox}\vfill
	{\large \startDate}\par
\end{titlepage}

% ïndices
\clearpage
\tableofcontents

%\clearpage
%\listoffigures
	
%\clearpage
%\listoftables
% Fin de Índices

\clearpage
\section{Hilos}

Originalmente, un \textbf{proceso} (también conocido como proceso tradicional o pesado) es una instancia de un programa en ejecución el cual está conformado por:

\begin{itemize}
	\item Contador del programa
	\item Registros
	\item Variables
\end{itemize}

Estos procesos ejecutan una sola tarea a la vez.

Si bien para ejecutar varias tareas a la vez se pueden ejecutar varios procesos simúltaneamente, cuando estos requieren compartir información entre sí, requieren un medio de comunicación, lo cual puede llegar ser complicado y además se requiere de recursos adicionales. Sin embargo, para este tipos de situaciones, en los sistemas multihilos, existen los procesos multihilos.

Un \textbf{hilo} (proceso ligero) es una unidad básica de uso del CPU. Un hilo se encuentra dentro de un proceso. Un proceso puede contener un hilo (monohilo) o múltiples hilos (multihilo).

\begin{tcolorbox}[colback=blue!5!white,colframe=blue!75!black,title=Nota]
	En los \textbf{sistemas monohilo} no existe el concepto de hilo, debido a que no puede separar los procesos en hilos.
\end{tcolorbox}

Un hilo está conformado por:

\begin{itemize}
	\item Contador de programa
	\item Conjunto de registros
	\item Espacio de stack
\end{itemize}

Los hilos dentro de un mismo proceso (hilos hermanos) comparten:

\begin{itemize}
	\item Código
	\item Datos
	\item Recursos del Sistema Operativo
\end{itemize}

\clearpage
\section{Hilos POSIX}

POSIX (Portable Operating System Interface). Históricamente, cada fabricante de hardware implementaba sus propios hilos y la manera de gestionarlos. Las implementaciones variaban
notablemente, lo que dificultaba a los programadores desarrollar aplicaciones con hilos portables.

En 1993, IEEE definió un estandár para hilos: \textit{IEEE standard 1003.1c.}. Las implementaciones basads en este estándar son conocidas como hilos POSIX o Pthreads.

Este estándar define más de 60 funciones; entre ellas se encuentran:

\begin{itemize}
	\item \texttt{Pthread\_create}: Crea un hilo nuevo.
	\item \texttt{Pthread\_exit}: Finaliza el hilo llamado.
	\item \texttt{Pthread\_join}: Espera a que un hilo en específico termine.
	\item \texttt{Pthread\_yield}: Libera la CPU para permitir que otro hilo se ejecute.
	\item \texttt{Pthread\_attr\_init}: Crea e inicializa una estructura de atributos de un hilo
	\item \texttt{Pthread\_attr\_destroy}: Elimina una estructura de atributos de un hilo
\end{itemize}

Todos los Pthreads tienen ciertas propiedades. Cada uno tiene un identificador, un conjunto de registros (incluyendo  el contador del programa) y un conjunto de atributos, los cuales son almacenados en una estructura. Los atributos incluyen el tamaño de la pila, parámetros de agenda y otros elementos para utilizar el hilo.

Se crea un nuevo hilo utilizando la llamada pthread create. El identificador del hilo recién creado se devuelve como valor de la función. Esta llamada es intencionalmente muy parecida a la llamada al sistema fork (excepto con parámetros), con el identificador del hilo jugando el papel del PID, principalmente para identificar hilos referenciados en otras llamadas. llamadas.

Cuando un hilo ha terminado el trabajo que se le ha asignado, puede terminar llamando a pthread exit. Esta llamada detiene el hilo y libera su pila. 

A menudo un hilo necesita esperar a que otro hilo termine su trabajo y salga antes de continuar. El hilo que está esperando llama a pthread join para esperar a que otro hilo específico termine. El identificador de la hebra a esperar se da como parámetro. 

A veces ocurre que un hilo no está lógicamente bloqueado, pero siente que ha corrido lo suficiente y quiere dar a otro hilo la oportunidad de correr. Puede lograr este objetivo llamando a pthread yield. No existe tal llamada para los procesos porque se asume que los procesos son ferozmente competitivos y cada uno quiere todo el tiempo de CPU que pueda conseguir. Sin embargo, como los hilos de un proceso están trabajando juntos y su código está invariablemente escrito por el mismo programador, a veces el programador quiere que se den otra oportunidad. 

Las dos siguientes llamadas a hilos se ocupan de los atributos. Pthread attr init crea la estructura de atributos asociada a un hilo y la inicializa con los valores por defecto. Estos valores (como la prioridad) pueden cambiarse manipulando los campos de la estructura de atributos.

Finalmente, pthread attr destroy elimina la estructura de atributos de un hilo, liberando su memoria. Esto no afecta a los hilos que la utilizan, que siguen existiendo.

\clearpage
\section{Conclusión}

En retrospectiva, los hilos son una parte fundamental para garantizar una mejor eficiencia y comunicación a través de diferentes programas. Adicionalmente, POSIX es un estándar que permite el desarrollo de programas multihilos el cual permite que estos puedan ser ejecutados en la mayoría de los SO.

Para finalizar, los Algoritmos de Planificación son muy importantes debido a que permite que cada uno de los procesos/hilos puedan ser gestionados por el SO para garantizar una mayor eficiencia (aprovechando los tiempos espera) y un mayor control sobre su ejecución.

\clearpage
\section{Cuestionario}

\begin{enumerate}
	\item Describa en qué consisten los algoritmos de planificación Apropiativos
	
	Estos algoritmos a diferencia de los no apropiativos, consisten en que los procesos pueden ser suspendidos multiples veces, es decir, un proceso una vez ejecutado, puede ser pausado y reaunudado mútiples veces durante su ciclo de vida.

	\item ¿En qué consisten el Algoritmo de Planificación por Prioridades y como se clasifica?
	
	Consisten en ejecutar los procesos partiendo desde el que posee mayor prioridad al de menor. Estos se clasifican en:

	\begin{itemize}
		\item \textbf{Estáticos}: En este enfoque, cada proceso se le asigna una prioridad estática en el momento de su creación y esta prioridad no cambia durante su ejecución.
		\item \textbf{Dinámicos}: En este caso, las prioridades de los procesos pueden cambiar durante la ejecución en función de ciertos criterios.
	\end{itemize}
	
	\item ¿En qué consiste el Algoritmo de Planificación de colas múltiples?
	
	Consiste en dividir los procesos en diferentes colas de acuerdo con ciertos criterios, como la prioridad del proceso, su tipo, su tiempo de llegada, entre otros. Cada cola puede tener su propio algoritmo de planificación asociado.

	\item Diferencia entre el estado “Bloqueado y Suspendido” y “Listo y Suspendido”.
	
	\begin{itemize}
		\item \textbf{Bloqueado y Suspendido}: Este estado señala que el proceso ha sido detenido temporalmente debido a alguna condición, p. ej: debido a que está a la espera de algun recurso del sistema.
		\item \textbf{Listo y Suspendido}: Este estado indica que el proceso que ha sido suspendido por el sistema, ya sea por alguna \textbf{política de planificación} o porque ha estado inactivo durante un tiempo prolongado.
	\end{itemize}

	\item ¿Cuál es el tiempo de Respuesta?
	
	El intérvalo de tiempo que transcurre desde que se crea el proceso hasta que es ejecutado por primera vez.

	\item Describa el algoritmo de planificación Apropiativo RR.
	
	El Round Robin consiste en ejecutar un proceso máximo un \textit{Quantum} de tiempo (un tiempo definido) y, si este proceso no se termina antes del \textit{Quantum} se pone en la cola de espera y así sucesívamente hasta que el proceso finalice.

	\item ¿Qué es el Quantum?
	
	El \textit{Quantum} es un intérvalo de tiempo ya establecido que se utiliza en algorimtos de planificación tal como el round robin o el round robin mejorado.
\end{enumerate}

\clearpage
\section{Quiz Algorimtos de Planificación}
\begin{figure}[h]
	\centering
	\includegraphics[width=0.8\textwidth]{./img/quiz.jpg}
	\caption{Calificación - Quiz: Algoritmos de Planificación}
\end{figure}
% Referencias

\nocite{*} % Para incluir todas las referencias sin necesidad de citarlas

\clearpage
\bibliographystyle{apalike}
\bibliography{ref}

\end{document}
